## 1、多表查询

### 1、内联查询

#### 1、笛卡尔积

~~~ sql
SELECT * FROM T1,T2;
~~~

两个集合的所有可能组成情况构成的集合。

#### 2、消除笛卡尔积

笛卡尔积是两个表的记录的所有组成情况，但并不是我们期望的结构，通过WHERE条件减少，得到我们需求结果。

**写法1（常用）：**

~~~ sql
SELECT * FROM T1.ID = T2.ID;
~~~

写法2：

~~~ sql
SELECT * FROM T1 (INNER可省略) JOIN T2 ON T1.ID = T2.ID;  
~~~



### 2、外联查询

#### 1、左外查询

~~~ sql
SELECT * FROM T1 LEFT JOIN T2 ON T1.ID = T2.ID;
~~~

表1的记录即使在表二中不存在对应的记录，也将其放入结果中，只是对应结果记录中表2的字段为null。

#### 2、右外查询

将左外的sql语句的T1和T2调换位置即可实现右外的功能。

~~~ sql
SELECT * FROM T2 RIGHT JOIN T1 ON T1.ID = T2.ID;
~~~

此句sql功能等同于左外。



### 3、子查询

#### 1、单行单列

查询语句的返回结果是单行单列的话，可以将其当作一个数值，使用各种条件运算符（> < = >= <= **<>**）等。

#### 2、多行单列

如果返回的结果是多行单列的话，可以使用运算符in。

#### 3、多行多列

如果返回结果是多行多列，可以将其看成是一个虚拟表进行使用。



### 案例

案例：角色表和权限表是多对多的关系，中间表为角色-权限表，如何查询一个角色对应的权限？

解：权限表和中间表是一对多的关系，且中间表中存在角色ID，所以我们可以通过权限表和角色表内联查询得到对应角色的权限信息